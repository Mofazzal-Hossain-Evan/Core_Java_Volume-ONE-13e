# **Java 16 ржПржмржВ Java 21-ржП Pattern Matching ржУ Record Pattern ржирж┐рзЯрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЖрж▓рзЛржЪржирж╛**

Java 16 ржПржмржВ ржкрж░ржмрж░рзНрждрзА рж╕ржВрж╕рзНржХрж░ржгрзЗ `instanceof` ржЕржкрж╛рж░рзЗржЯрж░ ржЖрж░ржУ рж╕рзБржмрж┐ржзрж╛ржЬржиржХржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ **Pattern Matching** ржкржжрзНржзрждрж┐рж░ ржорж╛ржзрзНржпржорзЗред ржПржЫрж╛рзЬрж╛, Java 21-ржП **Record Pattern** ржпрзБржХрзНржд рж╣рзЯрзЗржЫрзЗ, ржпрж╛ Record Type-ржПрж░ рж╕рж╛ржерзЗ ржЖрж░ржУ рж╕рж╣ржЬ ржПржмржВ ржХрж╛рж░рзНржпржХрж░ ржХрзЛржб рж▓рзЗржЦрж╛рж░ рж╕рзБржпрзЛржЧ ржжрзЗрзЯред ржПржЗ ржЖрж▓рзЛржЪржирж╛рзЯ ржЖржорж░рж╛ ржПржХрзЗ ржПржХрзЗ рж╕ржм ржжрж┐ржХ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржмрзЛред

---

## **рзз. `instanceof` ржЕржкрж╛рж░рзЗржЯрж░рзЗрж░ ржкрзБрж░ржирзЛ ржУ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓**

ржЖржЧрзЗ ржпржЦржи `instanceof` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЛ, рждржЦржи ржХрж╛рж╕рзНржЯрж┐ржВ ржкрзНрж░рзЯрзЛржЬржи рж╣рждрзЛ, ржпрж╛ ржХрзЛржбржХрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржжрзАрж░рзНржШ ржХрж░рждред ржпрзЗржоржиржГ

```java
if (staff[i] instanceof Manager) {
   Manager boss = (Manager) staff[i];  // ржПржХржЗ ржХрзНрж▓рж╛рж╕рзЗрж░ ржирж╛ржо рждрж┐ржиржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯрзЗржЫрзЗ
   boss.setBonus(5000);
}
```

ржПржЯрж┐ ржмрзЗрж╢ **verbose**, ржХрж╛рж░ржг ржЖржорж░рж╛ **Manager** ржХрзНрж▓рж╛рж╕рзЗрж░ ржирж╛ржо рждрж┐ржиржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐ред

### **тЬЕ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓ (Java 16 ржерзЗржХрзЗ)**
Java 16 ржерзЗржХрзЗ ржПржЗ ржХрзЛржбржЯрж┐ ржЖрж░ржУ рж╕ржВржХрзНрж╖рж┐ржкрзНрждржнрж╛ржмрзЗ рж▓рзЗржЦрж╛ ржпрж╛рзЯржГ

```java
if (staff[i] instanceof Manager boss) {
   boss.setBonus(5000);
}
```

ржПржЦрж╛ржирзЗ `staff[i]` ржпржжрж┐ **Manager** рж╣рзЯ, рждрж╛рж╣рж▓рзЗ **boss** ржирж╛ржорзЗ ржПржХржЯрж┐ рж▓рзЛржХрж╛рж▓ ржнрзЗрж░рж┐рзЯрзЗржмрж▓ рж╕рзЗржЯ рж╣ржмрзЗ, ржпрж╛ ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред ржЖрж░ ржпржжрж┐ `staff[i]` **Manager** ржирж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ `instanceof` ржЕржкрж╛рж░рзЗржЯрж░ `false` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗ ржПржмржВ `if` ржмрзНрж▓ржХрзЗрж░ ржХрзЛржб ржЪрж▓ржмрзЗ ржирж╛ред

---

## **рзи. ржнрзБрж▓ ржПржмржВ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ `instanceof` ржЪрзЗржХ**
ржЕржирзЗржХ рж╕ржорзЯ ржПржоржи `instanceof` ржЪрзЗржХ рж▓рзЗржЦрж╛ рж╣рзЯ ржпрж╛ ржЖрж╕рж▓рзЗ **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ** ржПржмржВ ржХржорзНржкрж╛ржЗрж▓-ржЯрж╛ржЗржо рждрзНрж░рзБржЯрж┐ рждрзИрж░рж┐ ржХрж░рзЗред ржпрзЗржоржиржГ

```java
Manager boss = new Manager();
if (boss instanceof Employee e) {
   // тЭМ ERROR: ржПржЯрж┐ ржнрзБрж▓, ржХрж╛рж░ржг Manager ржирж┐ржЬрзЗржЗ Employee ржПрж░ рж╕рж╛ржмржХрзНрж▓рж╛рж╕ред
}
```

ржПржЯрж┐ ржХржорзНржкрж╛ржЗрж▓-ржЯрж╛ржЗржо рждрзНрж░рзБржЯрж┐ ржжрзЗржмрзЗ, ржХрж╛рж░ржг **Manager** ржЗрждрж┐ржоржзрзНржпрзЗржЗ **Employee** ржПрж░ рж╕рж╛ржмржХрзНрж▓рж╛рж╕, рждрж╛ржЗ ржПржЗ ржЪрзЗржХрзЗрж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред рждржмрзЗ ржирж┐ржЪрзЗрж░ рж╕рзНржЯрж╛ржЗрж▓рзЗрж░ ржЪрзЗржХ **ржЪрж▓ржмрзЗ**, ржХрж╛рж░ржг ржПржЯрж┐ Java 1.0 ржерзЗржХрзЗ **backward compatibility** ржмржЬрж╛рзЯ рж░рж╛ржЦрждрзЗ рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред

```java
if (boss instanceof Employee) {
   // тЬЕ ржПржЯрж┐ ржХрж╛ржЬ ржХрж░ржмрзЗ, рждржмрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯред
}
```

---

## **рзй. `&&` ржПржмржВ `||` ржПрж░ рж╕рж╛ржерзЗ Pattern Matching**
Pattern Matching ржпрзБржХрзНржд `instanceof` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ **&& (AND)** ржЕржкрж╛рж░рзЗржЯрж░рзЗрж░ рж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ, рждржмрзЗ **|| (OR)** ржПрж░ рж╕рж╛ржерзЗ ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ рж╣рзЯред

### **тЬЕ `&&` ржПрж░ рж╕рж╛ржерзЗ рж╕ржарж┐ржХ ржмрзНржпржмрж╣рж╛рж░**
```java
Employee e;
if (e instanceof Executive exec && exec.getTitle().length() >= 20) {
   // ржПржЦрж╛ржирзЗ exec ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗ
}
```

### **тЭМ `||` (OR) ржПрж░ рж╕рж╛ржерзЗ ржнрзБрж▓ ржмрзНржпржмрж╣рж╛рж░**
```java
if (e instanceof Manager exec || exec.getTitle().length() >= 20) {
   // тЭМ ERROR: ржпржжрж┐ ржкрзНрж░ржержо рж╢рж░рзНржд ржорж┐ржерзНржпрж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ exec рж╕рзЗржЯ рж╣рзЯржирж┐ред
}
```

---

## **рзк. `instanceof` ржПржмржВ `? :` (ржЯрзЗрж░ржирж╛рж░рж┐ ржЕржкрж╛рж░рзЗржЯрж░)**
```java
String title = e instanceof Executive exec ? exec.getTitle() : "";
```

---

## **рзл. Shadowing: рж▓рзЛржХрж╛рж▓ ржнрзЗрж░рж┐рзЯрзЗржмрж▓ ржмржирж╛ржо ржлрж┐рж▓рзНржб ржнрзЗрж░рж┐рзЯрзЗржмрж▓**
```java
class Value {
   private double v;
   public boolean equals(Object other) {
      if (other instanceof Value v) {
         // ржПржЦрж╛ржирзЗ v рж╣рж▓ рж▓рзЛржХрж╛рж▓ ржнрзЗрж░рж┐рзЯрзЗржмрж▓
      } else {
         // ржПржЦрж╛ржирзЗ v рж╣рж▓ ржХрзНрж▓рж╛рж╕ ржлрж┐рж▓рзНржб
      }
   }
}
```

---

## **рзм. Java 21-ржП `Record Pattern` (Record ржЯрж╛ржЗржкрзЗрж░ рж╕рж╛ржерзЗ Pattern Matching)**
```java
record Point(double x, double y) {}
Point p = new Point(3, 4);

if (p instanceof Point(var a, var b)) {
   double distance = Math.hypot(a, b);
}
```

---

## **рзн. Nested Record Pattern**
```java
record Circle(Point center, double radius) {}
Circle c = new Circle(new Point(3, 4), 5);

if (c instanceof Circle(Point(var a, var b), var r)) {
   System.out.println("Center: (" + a + ", " + b + "), Radius: " + r);
}
```

---

## **рзо. Java 21-ржПрж░ `Unnamed Variables` (JEP 443)**
```java
if (p instanceof Point(var a, _)) {
   double distance = Math.abs(a);
}
```

**тЭЧ ржПржЯрж┐ Java 21-ржПрж░ ржПржХржЯрж┐ "preview feature"ред ржпржжрж┐ ржПржЯрж┐ ржПржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ `_` ржПрж░ ржмржжрж▓рзЗ `var __` (ржбрж╛ржмрж▓ ржЖржирзНржбрж╛рж░рж╕рзНржХрзЛрж░) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред**

---

## **ЁЯФ╣ ржЙржкрж╕ржВрж╣рж╛рж░**
1. Java 16 ржерзЗржХрзЗ **Pattern Matching** ржпрзБржХрзНржд `instanceof` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ **ржХрзЛржб ржЫрзЛржЯ ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░** рж╣рзЯред
2. **`&&` ржЕржкрж╛рж░рзЗржЯрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ `||` ржПрж░ рж╕рж╛ржерзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯред**
3. **Record Pattern (Java 21)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ **record type-ржПрж░ ржлрж┐рж▓рзНржбржЧрзБрж▓рзЛ рж╕рж░рж╛рж╕рж░рж┐ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛ ржпрж╛рзЯ**ред
4. **Unnamed Variables** ржжрж┐рзЯрзЗ **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржлрж┐рж▓рзНржб ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржпрж╛рзЯред**

ржПржЧрзБрж▓рж┐ Java-рж░ ржирждрзБржи ржУ ржЙржирзНржиржд ржлрж┐ржЪрж╛рж░, ржпрж╛ ржХрзЛржбржХрзЗ рж╕рж╣ржЬ ржХрж░рзЗ рждрзЛрж▓рзЗ ржПржмржВ **better readability ржУ maintainability** ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗред ЁЯЪА
