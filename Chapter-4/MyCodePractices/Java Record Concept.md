# **Java-рждрзЗ Record ржХржирж╕рзЗржкрзНржЯ: ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг ржЖрж▓рзЛржЪржирж╛**

## **1. рж░рзЗржХрж░рзНржб ржХрзА?**
Java-рждрзЗ **Record** рж╣рж▓рзЛ ржПржХржЯрж┐ ржмрж┐рж╢рзЗрж╖ ржзрж░ржирзЗрж░ ржХрзНрж▓рж╛рж╕, ржпрж╛рж░ ржЕржмрж╕рзНржерж╛ (**state**) ржЕржкрж░рж┐ржмрж░рзНрждржирзАрзЯ (**immutable**) ржПржмржВ ржкрж╛ржмрж▓рж┐ржХрж▓рж┐ рж░рж┐ржбрзЗржмрж▓ (**readable by the public**)ред рж╕рж╣ржЬ ржнрж╛рж╖рж╛ржпрж╝, рж░рзЗржХрж░рзНржб рж╣рж▓рзЛ ржПржоржи ржПржХ ржзрж░ржирзЗрж░ ржХрзНрж▓рж╛рж╕, ржпрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрж╛ржЯрж╛ ржзрж╛рж░ржг ржХрж░рзЗ ржПржмржВ рж╕рзЗржЗ ржбрж╛ржЯрж╛ржХрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛ред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржирж┐ржЪрзЗрж░ **Point** рж░рзЗржХрж░рзНржбржЯрж┐ ржжрзЗржЦрзБржи:
```java
record Point(double x, double y) { }
```
ржПржЗ ржХрзЛржбржЯрж┐ рж▓рзЗржЦрж╛рж░ ржлрж▓рзЗ, Java рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржирж┐ржЪрзЗрж░ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рзЗ ржжрзЗрзЯтАФ
1. **private final** ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржлрж┐рж▓рзНржб рждрзИрж░рж┐ ржХрж░рзЗ:
   ```java
   private final double x;
   private final double y;
   ```
2. **ржПржХржЯрж┐ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░ рждрзИрж░рж┐ ржХрж░рзЗ**
   ```java
   Point(double x, double y) { }
   ```
3. **ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕рж░ ржорзЗржержб (getter) рждрзИрж░рж┐ ржХрж░рзЗ**
   ```java
   public double x() { return x; }
   public double y() { return y; }
   ```

> **ржмрж┐ржГржжрзНрж░ржГ** ржПржЦрж╛ржирзЗ `x()` ржПржмржВ `y()` ржорзЗржержбржЧрзБрж▓рзЛрж░ ржирж╛ржо `getX()` ржмрж╛ `getY()` ржиржпрж╝ред ржХрж╛рж░ржг Java-ржПрж░ рж░рзЗржХрж░рзНржбржЧрзБрж▓рзЛ ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА **getter naming convention** ржЕржирзБрж╕рж░ржг ржХрж░рзЗ ржирж╛, ржпрж╛ ржХрж┐ржЫрзБ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЭрж╛ржорзЗрж▓рж╛ рж╕рзГрж╖рзНржЯрж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

## **2. рж░рзЗржХрж░рзНржб ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рж╣ржЬ ржЙржжрж╛рж╣рж░ржг**
```java
var p = new Point(3, 4);
System.out.println(p.x() + " " + p.y()); // ржЖржЙржЯржкрзБржЯ: 3 4
```
ржПржЦрж╛ржирзЗ `p.x()` ржПржмржВ `p.y()` ржорзЗржержб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рж╣ржЬрзЗржЗ ржбрж╛ржЯрж╛ рж░рж┐ржб ржХрж░рж╛ ржпрж╛ржЪрзНржЫрзЗред

---

## **3. ржХрзЗржи Java-рждрзЗ getter ржорзЗржержбрзЗрж░ ржирж╛ржо ржЖрж▓рж╛ржжрж╛?**
рж╕рж╛ржзрж╛рж░ржгржд, Java-рждрзЗ getter ржорзЗржержбрзЗрж░ ржирж╛ржо `getFieldName()` рж╣рзЯред рждржмрзЗ, рж░рзЗржХрж░рзНржбрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржлрж┐рж▓рзНржбрзЗрж░ ржирж╛ржоржЯрж╛ржЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕рж░ ржорзЗржержбрзЗрж░ ржирж╛ржо рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред

ржХрж╛рж░ржг:
- **Boolean ржлрж┐рж▓рзНржбрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ** `isFieldName()` ржмрзНржпржмрж╣рзГржд рж╣рзЯ, ржпрж╛ ржЬржЯрж┐рж▓рждрж╛ рж╕рзГрж╖рзНржЯрж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗред
- **ржХрзНрж╖рзЗрждрзНрж░ рж╕ржВржмрзЗржжржирж╢рзАрж▓рждрж╛** (case sensitivity) рж╕ржорж╕рзНржпрж╛ рж╣рзЯ, ржпрзЗржоржи `x` ржПржмржВ `X` ржЖрж▓рж╛ржжрж╛ ржлрж┐рж▓рзНржб рж╣рж▓рзЗ ржирж╛ржоржХрж░ржгрзЗ ржжрзНржмржирзНржжрзНржм рж╣рждрзЗ ржкрж╛рж░рзЗред
- ржЕржирзЗржХ ржкрзБрж░ржирзЛ **mutable ржХрзНрж▓рж╛рж╕ржЧрзБрж▓рзЛ рж░рзЗржХрж░рзНржбрзЗ рж╕рж╣ржЬрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╕ржорзНржнржм ржирзЯред**

---

## **4. рж░рзЗржХрж░рзНржбрзЗрж░ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯ ржорзЗржержб: toString, equals, hashCode**
ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржХрж░рзНржбрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд **рждрж┐ржиржЯрж┐ ржорзЗржержб** рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рждрзИрж░рж┐ рж╣ржпрж╝:
1. **toString()** - рж░рзЗржХрж░рзНржбрзЗрж░ ржбрж╛ржЯрж╛ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп
2. **equals()** - ржжрзБржЯрж┐ рж░рзЗржХрж░рзНржб ржЕржмржЬрзЗржХрзНржЯ рж╕ржорж╛ржи ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп
3. **hashCode()** - рж╣рзНржпрж╛рж╢ ржХрзЛржб ржЬрзЗржирж╛рж░рзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп

---

## **5. ржХрж╛рж╕рзНржЯржо ржорзЗржержб рж╕ржВржпрзЛржЬржи ржХрж░рж╛ рж╕ржорзНржнржм**
ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ рж░рзЗржХрж░рзНржбрзЗрж░ ржоржзрзНржпрзЗ **ржирж┐ржЬрж╕рзНржм ржорзЗржержб** рж╕ржВржпрзЛржЬржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, **distanceFromOrigin()** ржирж╛ржорзЗрж░ ржПржХржЯрж┐ ржорзЗржержб ржпрзЛржЧ ржХрж░рж╛ рж╣рж▓рзЛ:
```java
record Point(double x, double y) {
    public double distanceFromOrigin() {
        return Math.hypot(x, y);
    }
}
```
ржПржЯрж┐ ржкрзЯрзЗржирзНржЯрзЗрж░ (0,0) ржерзЗржХрзЗ ржХржд ржжрзВрж░рзЗ ржЖржЫрзЗ рждрж╛ ржЧржгржирж╛ ржХрж░ржмрзЗред

---

## **6. рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржлрж┐рж▓рзНржб ржПржмржВ ржорзЗржержб рж╕ржВржпрзЛржЬржи ржХрж░рж╛ рж╕ржорзНржнржм**
ржпрзЗрж╣рзЗрждрзБ рж░рзЗржХрж░рзНржб ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕рзЗрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗ, рждрж╛ржЗ ржЖржорж░рж╛ **static fields ржПржмржВ static methods** рж╕ржВржпрзЛржЬржи ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

```java
record Point(double x, double y) {
    public static Point ORIGIN = new Point(0, 0);

    public static double distance(Point p, Point q) {
        return Math.hypot(p.x - q.x, p.y - q.y);
    }
}
```
---

## **7. ржХрзЗржи рж░рзЗржХрж░рзНржбрзЗ ржирждрзБржи ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛?**
рж░рзЗржХрж░рзНржбрзЗрж░ ржорзВрж▓ ржЙржжрзНржжрзЗрж╢рзНржп рж╣рж▓рзЛ **immutable data carrier** рждрзИрж░рж┐ ржХрж░рж╛ред рждрж╛ржЗ, ржирждрзБржи **ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржлрж┐рж▓рзНржб** рж╕ржВржпрзЛржЬржи ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

ржпрзЗржоржи ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ **ржПрж░рж░** ржжрж┐ржмрзЗ:
```java
record Point(double x, double y) {
    private double r; // ERROR
}
```

---

## **8. рж░рзЗржХрж░рзНржбрзЗрж░ Mutable ржЕржмрж╕рзНржерж╛: рж╕рждрж░рзНржХрждрж╛**
ржпржжрж┐ржУ рж░рзЗржХрж░рзНржбрзЗрж░ **ржлрж┐рж▓рзНржбржЧрзБрж▓рзЛ final**, рждржмрзЗ ржпржжрж┐ ржХрзЛржирзЛ **mutable object** рж╕ржВржпрзБржХрзНржд ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржп рж╣рждрзЗ ржкрж╛рж░рзЗред

```java
record PointInTime(double x, double y, Date when) { }
```
ржПржЦржи, ржпржжрж┐ ржЖржорж░рж╛ `PointInTime` ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж┐, рждржЦржи `Date` ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржп рж╣рждрзЗ ржкрж╛рж░рзЗ:
```java
var pt = new PointInTime(0, 0, new Date());
pt.when().setTime(0); // ржлрж┐рж▓рзНржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╕ржорзНржнржм!
```
ржПржЬржирзНржп, **immutable рж░рзЗржХрж░рзНржб рждрзИрж░рж┐ ржХрж░рждрзЗ mutable object ржлрж┐рж▓рзНржб ржПржбрж╝рж┐рзЯрзЗ ржЪрж▓рзБржиред**

---

## **9. ржХржЦржи рж░рзЗржХрж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?**
тЬЕ **рж░рзЗржХрж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржпржжрж┐:**
- ржбрж╛ржЯрж╛ ржЕржкрж░рж┐ржмрж░рзНрждржирзАрзЯ (**immutable**) рж╣рзЯред
- ржХрзНрж▓рж╛рж╕ржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржнрзНржпрж╛рж▓рзБ ржзрж╛рж░ржг ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред
- ржПржХрж╛ржзрж┐ржХ ржерзНрж░рзЗржбрзЗ ржирж┐рж░рж╛ржкржжржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ (**Thread-Safe**)ред
- рж╕рж╣ржЬ ржУ ржХрж╛рж░рзНржпржХрж░ **toString, equals, hashCode** ржорзЗржержб ржжрж░ржХрж╛рж░ рж╣рзЯред

тЭМ **рж░рзЗржХрж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛ ржпржжрж┐:**
- ржбрж╛ржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржп (**mutable**) рж╣рзЯред
- ржнржмрж┐рж╖рзНржпрждрзЗ ржирждрзБржи ржлрж┐рж▓рзНржб рж╕ржВржпрзЛржЬржи ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред
- ржХрзНрж▓рж╛рж╕рзЗрж░ рж▓ржЬрж┐ржХ ржЬржЯрж┐рж▓ рж╣рзЯред

---

## **рж╢рзЗрж╖ ржХржерж╛**
Java-рждрзЗ **Record** рж╣рж▓рзЛ immutable data ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐рж░ ржПржХржЯрж┐ рж╕рж╣ржЬ ржУ ржХрж╛рж░рзНржпржХрж░ ржкржжрзНржзрждрж┐ред ржПржЯрж┐ **ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкржж, рж╕рж╣ржЬрзЗ ржкрзЬрж╛ ржпрж╛рзЯ, ржПржмржВ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕-ржЙржирзНржиржд** ржХрж░рзЗред рждржмрзЗ, Mutable ржЕржмржЬрзЗржХрзНржЯ рж╕ржВржпрзЛржЬржи ржХрж░рж▓рзЗ рж░рзЗржХрж░рзНржбрзЗрж░ ржорзВрж▓ ржзрж╛рж░ржгрж╛ ржмрзНржпрж╛рж╣ржд рж╣рждрзЗ ржкрж╛рж░рзЗред рждрж╛ржЗ, **Immutable Data Model** рждрзИрж░рж┐ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ рж░рзЗржХрж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржнрж╛рж▓рзЛ ржЕржнрзНржпрж╛рж╕ред ЁЯЪА
